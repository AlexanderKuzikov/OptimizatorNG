# Дневник разработки "Optimizator Next Gen"

## Сессия 2: Настройка окружения и первая функция (24.08.2025)

- **Задача:** Настроить рабочее окружение для TypeScript-проекта и создать первую атомарную функцию `removeStyles` с тестами.
- **Действия:**
  1. Инициализирован `npm` в проекте (`package.json`).
  2. Установлены ключевые dev-зависимости: `typescript`, `jest`, `ts-jest`, `@types/jest`.
  3. Созданы и настроены конфигурационные файлы `tsconfig.json` и `jest.config.js`.
  4. **Столкнулись с проблемами:**
     - Предупреждения `EBADENGINE` из-за нестабильной версии Node.js (v23).
     - **Решение:** Установлен `nvm-windows` для управления версиями, выполнен переход на стабильную LTS-версию (v22.18.0).
     - Конфликт `PATH` из-за старой глобальной установки Node.js.
     - **Решение:** Удалена глобальная версия Node.js через "Установку и удаление программ".
     - Визуальные ошибки в VS Code, не связанные с кодом.
     - **Решение:** Диагностирован конфликт версий TypeScript в VS Code, проблема решена выбором "Workspace's Version".
     - Ошибки `Jest` "No tests found".
     - **Решение:** Скорректирован `jest.config.js` для явного указания пути к тестовым файлам.
- **Результат:**
  - Рабочее окружение полностью настроено.
  - Создана первая атомарная функция `removeStyles` и покрыта тремя тестами в `removeStyles.test.ts`.
  - Команда `npm test` успешно выполняется, все тесты проходят.
- **Вывод:** "Конвейер" для разработки и тестирования готов к работе.

## Сессия 1: Архитектурное проектирование (23.08.2025)

- Определена миссия, роли (Архитектор/Пользователь, Разработчик/LLM) и стек технологий (Electron, TypeScript).
- Утверждена трехуровневая архитектура: "Оболочка" -> "Оркестратор" -> "Ядро".
- Спроектирована структура `config.json` с тремя корневыми ключами: `themeSettings`, `documentSettings`, `processingSteps`.
- Детализирована структура "атома" (объекта операции) с полями `id`, `name`, `description`, `enabled`, `ui`, `params`.
- Спроектированы первые атомарные функции: `removeStyles`, `setDefaultStyle`, `removeParagraphSpacing`, `removeFirstLineIndentation`, `setPageMargins`.
- После обсуждения принято решение об агрегации функций по удалению отступов, но затем, следуя принципу атомизации, вернулись к раздельным модулям.
- Утверждена гибридная модель для управления стилями: быстрая (замена `styles.xml` из шаблона) и гибкая (генерация `styles.xml` из `config.json`).
- Спроектирован "Режим отладки" (Developer Mode) для удобства тестирования, отображающий все настройки на одном экране.
